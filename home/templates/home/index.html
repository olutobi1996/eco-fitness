{% extends "base.html" %}
{% load static %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section" data-aos="fade-up">
  <canvas id="ecoCanvas"></canvas>
  <div class="container">
    <div class="hero-content-wrapper">
      <div class="hero-content" data-aos="fade-up" data-aos-delay="100">
        <h1 data-aos="fade-right" data-aos-delay="200">Transform Your Fitness, Sustainably</h1>
        <p data-aos="fade-right" data-aos-delay="300">Join our <strong>eco-friendly fitness community</strong>, shop
          sustainable <strong>merchandise</strong>, and achieve your <strong>health goals</strong>.</p>
        <a href="{% url 'plans' %}" class="btn-primary" data-aos="fade-up" data-aos-delay="400" data-tilt><strong>Explore
            Plans</strong></a>
      </div>
    </div>
  </div>
</section>

<!-- Categories Section -->
<section class="categories-section" data-aos="fade-up">
  <div class="container">
    <h2 class="section-title" data-aos="fade-up" data-aos-delay="100"><strong>Our Services</strong></h2>
    <div class="row">
      <div class="col" data-aos="zoom-in" data-aos-delay="200">
        <div class="card" data-tilt data-tilt-max="10">
          <h5 data-aos="fade-up" data-aos-delay="300"><strong>Fitness & Diet Plans</strong></h5>
          <p data-aos="fade-up" data-aos-delay="400">Custom <strong>workout</strong> and <strong>meal plans</strong>
            tailored for you.</p>
          <a href="/plans" class="btn-primary" data-aos="fade-up" data-aos-delay="500" data-tilt><strong>Get Started</strong></a>
        </div>
      </div>
      <div class="col" data-aos="zoom-in" data-aos-delay="300">
        <div class="card" data-tilt data-tilt-max="10">
          <h5 data-aos="fade-up" data-aos-delay="400"><strong>Workout Reviews</strong></h5>
          <p data-aos="fade-up" data-aos-delay="500">See how others are progressing and share your
            <strong>journey</strong>.</p>
          {% if product and product.id %}
          <a href="{% url 'products:product_reviews_by_id' product.id %}" class="btn-primary" data-aos="fade-up"
            data-aos-delay="600" data-tilt><strong>Reviews</strong></a>
          {% else %}
          <p data-aos="fade-up" data-aos-delay="600">No product available to view reviews.</p>
          {% endif %}
        </div>
      </div>
      <div class="col" data-aos="zoom-in" data-aos-delay="400">
        <div class="card" data-tilt data-tilt-max="10">
          <h5 data-aos="fade-up" data-aos-delay="500"><strong>Eco-Friendly Shop</strong></h5>
          <p data-aos="fade-up" data-aos-delay="600">Sustainable <strong>fitness gear</strong> and
            <strong>apparel</strong>.</p>
          <a href="{% url 'products:all_products' %}" class="btn-primary" data-aos="fade-up"
            data-aos-delay="700" data-tilt><strong>Shop Now</strong></a>
        </div>
      </div>
      <div class="col" data-aos="zoom-in" data-aos-delay="500">
        <div class="card" data-tilt data-tilt-max="10">
          <h5 data-aos="fade-up" data-aos-delay="600"><strong>Join the Community</strong></h5>
          <p data-aos="fade-up" data-aos-delay="700">Connect with like-minded <strong>fitness enthusiasts</strong>.</p>
          <a href="{% url 'community' %}" class="btn-primary" data-aos="fade-up" data-aos-delay="800" data-tilt><strong>Join
              Now</strong></a>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Featured Products -->
<section class="container-fluid my-5">
  <div class="container boxed-section" data-aos="fade-up" data-aos-delay="100">
    <h2 class="text-center mb-4" data-aos="fade-up" data-aos-delay="200"><strong>Featured Merchandise</strong></h2>
    <div class="row g-4">
      {% if products %}
      {% for product in products %}
      <div class="col-md-4 d-flex" data-aos="zoom-in" data-aos-delay="300">
        <div class="card shadow-sm w-100" data-tilt data-tilt-max="10">
          <div class="card-body text-center d-flex flex-column">
            <h5 class="card-title" data-aos="fade-up" data-aos-delay="400"><strong>{{ product.name }}</strong></h5>
            <p class="card-text" data-aos="fade-up" data-aos-delay="500">${{ product.price }}</p>
            <a href="{% url 'products:product_detail' product.id %}" class="btn btn-outline-success mt-auto"
              data-aos="fade-up" data-aos-delay="600" data-tilt><strong>Buy Now</strong></a>
          </div>
        </div>
      </div>
      {% endfor %}
      {% else %}
      <div class="text-center" data-aos="fade-up" data-aos-delay="200">
        <h5 data-aos="fade-up" data-aos-delay="300"><strong>Looking for something inspiring?</strong></h5>
        <p data-aos="fade-up" data-aos-delay="400">We are curating the best eco-friendly fitness gear just for you!
          üå±üèãÔ∏è‚Äç‚ôÇÔ∏è</p>
        <a href="{% url 'products:all_products' %}" class="btn btn-success mt-3" data-aos="fade-up"
          data-aos-delay="500" data-tilt><strong>Browse All Products</strong></a>
      </div>
      {% endif %}
    </div>
  </div>
</section>

<!-- Testimonials Section -->
<section class="bg-light py-5">
  <div class="container">
    <h2 class="text-center mb-4" data-aos="fade-up"><strong>What Our Customers Say</strong></h2>
    <div class="row">
      <div class="col-md-4" data-aos="fade-right" data-aos-delay="100">
        <div class="card shadow-sm p-3" data-tilt>
          <p data-aos="fade-up" data-aos-delay="200">"The <strong>meal plans</strong> helped me lose 10lbs in 2 months!
            Amazing <strong>community</strong>!"</p>
          <h6 class="text-end" data-aos="fade-up" data-aos-delay="300"><strong>- Sarah W.</strong></h6>
        </div>
      </div>
      <div class="col-md-4" data-aos="fade-up" data-aos-delay="200">
        <div class="card shadow-sm p-3" data-tilt>
          <p data-aos="fade-up" data-aos-delay="300">"Sustainable <strong>fitness gear</strong> that actually performs.
            Love my eco yoga mat!"</p>
          <h6 class="text-end" data-aos="fade-up" data-aos-delay="400"><strong>- John D.</strong></h6>
        </div>
      </div>
      <div class="col-md-4" data-aos="fade-left" data-aos-delay="300">
        <div class="card shadow-sm p-3" data-tilt>
          <p data-aos="fade-up" data-aos-delay="400">"The <strong>workout reviews</strong> keep me motivated every day.
            Best fitness site ever!"</p>
          <h6 class="text-end" data-aos="fade-up" data-aos-delay="500"><strong>- Alex P.</strong></h6>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- CTA -->
<section class="container-fluid text-center my-5">
  <div class="container boxed-section" data-aos="zoom-in" data-aos-delay="100">
    <h2 data-aos="fade-up" data-aos-delay="200"><strong>Be Part of the Movement</strong></h2>
    <p data-aos="fade-up" data-aos-delay="300">Connect with other <strong>fitness enthusiasts</strong>, share progress,
      and support each other.</p>
    <a href="/community" class="btn btn-success btn-lg" data-aos="fade-up" data-aos-delay="400" data-tilt><strong>Join the
        Community</strong></a>
  </div>
</section>

<script>
  const canvas = document.getElementById('ecoCanvas');
  const ctx = canvas.getContext('2d');

  function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }
  resizeCanvas();
  window.addEventListener('resize', resizeCanvas);

  class Particle {
    constructor(x, y, size, speedY, symbol) {
      this.x = x;
      this.y = y;
      this.size = size;
      this.speedY = speedY;
      this.symbol = symbol;
    }

    update() {
      this.y += this.speedY;
      if (this.y > canvas.height) {
        this.y = -this.size;
        this.x = Math.random() * canvas.width;
      }
    }

    draw() {
      ctx.font = `${this.size}px Arial`;
      ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
      ctx.fillText(this.symbol, this.x, this.y);
    }
  }

  const symbols = ['üçÉ', 'üèãÔ∏è'];

  let particles = [];

  function initParticles(count = 50) {
    particles = [];
    for (let i = 0; i < count; i++) {
      let size = Math.random() * 24 + 12;
      let x = Math.random() * canvas.width;
      let y = Math.random() * canvas.height;
      let speedY = Math.random() * 1 + 0.5;
      let symbol = symbols[Math.floor(Math.random() * symbols.length)];
      particles.push(new Particle(x, y, size, speedY, symbol));
    }
  }

  function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    particles.forEach(p => {
      p.update();
      p.draw();
    });
    requestAnimationFrame(animate);
  }

  initParticles();
  animate();
</script>
{% endblock %}